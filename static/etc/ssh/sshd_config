##
##
## The command is invoked by using the user's login shell with the -c option. This applies to shell, command, or subsystem execution
## /sbin/sshd -p 22 -f /root/sshd-config
## sudo /usr/sbin/sshd -p 22 -f /etc/ssh/sshd_config
## sudo /usr/sbin/sshd -p 1134 -f /etc/ssh/sshd_config
## sudo /usr/sbin/sshd -p 1135 -f /etc/ssh/sshd_config -E /home/core/sshd.log

# SSHD Configuration for Docker SFTP Gateway
# This configuration:
# - Disables root login and password authentication
# - Enables public key authentication only
# - Sets up SFTP subsystem
# - Uses custom authorized_keys directory
# - Enforces secure defaults
#
# Usage:
# The SSHD daemon is started by entrypoint.sh when SERVICE_ENABLE_SSHD=true
# Keys are stored in /etc/ssh/authorized_keys.d/%u
# All connections are logged to /var/log/auth.log

Port 22
Protocol 2
HostKey /etc/ssh/ssh_host_rsa_key
HostKey /etc/ssh/ssh_host_dsa_key
HostKey /etc/ssh/ssh_host_ecdsa_key
UsePrivilegeSeparation yes
KeyRegenerationInterval 3600
ServerKeyBits 1024
SyslogFacility AUTH
LogLevel INFO
LoginGraceTime 120
PermitRootLogin no
StrictModes yes
RSAAuthentication yes
PubkeyAuthentication yes
IgnoreRhosts yes
RhostsRSAAuthentication no
HostbasedAuthentication no
PermitEmptyPasswords no
ChallengeResponseAuthentication no
PasswordAuthentication no
X11Forwarding yes
X11DisplayOffset 10
PrintMotd no
PrintLastLog yes
TCPKeepAlive yes
AcceptEnv LANG LC_*
Subsystem sftp /usr/lib/openssh/sftp-server
UsePAM no
AuthorizedKeysFile /etc/ssh/authorized_keys.d/%u
